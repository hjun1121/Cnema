<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="movieMapper">

  	<select id="selectOne" resultType="movieDTO" parameterType="int">
  		SELECT * FROM movie WHERE movie_num=#{movie_num}
  	</select>
  	
  	<select id="movieList" parameterType="java.util.Map" resultType="movieDTO">
  		select * from movie 
  		<choose>
  			<when test="kind == 'grade'">
  				order by grade desc
  			</when>
  			<when test="kind == 'open_date'">
  				order by open_date asc
  			</when>
  			<when test="kind == 'reserve_rate'">
  				order by reserve_rate desc
  			</when>
  		</choose>

  	</select>

  	<insert id="insert" parameterType="movieDTO">
  		insert into movie values(movie_seq.nextval, #{movie_name}, #{fileName}, #{oriName}, #{teaser_url}, 0, 0, #{open_date}, #{run_time}, 0, #{type}, #{contents}, #{age_limit})
  	</insert>

  	<!-- heeseong -->
  	<select id="movieInfo" resultType="movieDTO" >
  		select * from movie where movie_num=#{movie_num}
  	</select>
  	
  	<!-- heeseong -->
  	<select id="movieAList" resultType="movieDTO">
  		select * from movie order by movie_num desc
  	</select>
</mapper>
